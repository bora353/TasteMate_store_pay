<!DOCTYPE html>
<html lagn="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<th:block th:replace="header_footer/header :: headerFragment"></th:block>


<head>
    <meta charset="UTF-8">
    <title>store get</title>
    <link rel="stylesheet" th:href="@{/css/store_css.css}">

    <style>
        .yellow {
            color : #FFA500;
        }
        .fs35{
            font-size: 35px;
        }
        .img_size{
            width: 400px;
            height: 400px;
        }

    </style>
</head>
<body>


<!--<td th:text="${storeVO}"></td>-->

<td th:text="${storeVO_star}"></td>



<div class="container py-4 mt-5">
    <div class="row">
        <div class="col-lg-6">
            <div class="d-flex justify-content-center align-items-center">
                <img th:src="@{|/store/${storeVO.filename}|}" class="img-fluid img_size" />
            </div>

        </div>
        <div class="col-lg-6">
            <span th:text="${storeVO.category1}" class="mb-4 purple2"></span><br>
            <span th:text="${storeVO.storeName}" class="mb-4 purple fs35"></span>

<!--별점-->
        <span th:text="${storeVO_star.starVO[0].storeStar}" class="mb-4"></span>
            <th:block th:with="starCount=${storeVO_star.starVO[0].storeStar}">
                <span th:if="${starCount != 0.0}" th:each="i: ${#numbers.sequence(1, starCount)}" class="yellow fs35">★</span>
            </th:block><br><br>
<!--별점끝-->

            <p th:text="'주소 : ' + ${storeVO.storeAddress}" class="mb-4"></p>
            <p th:text="'전화번호 : ' + ${storeVO.phoneNumber}" class="mb-4"></p>

<!--
                        <p th:text="${storeVO.storeLati}" class="mb-4"></p>
                        <p th:text="${storeVO.storeLongi}" class="mb-4"></p>
 -->

            <a href="#" class="btn btn-danger" id="getMenu">메뉴보기</a><br><br>

            <div id="map" style="width:450px;height:300px;"></div><br>

            <a href="#" class="btn btn-primary">찜하기</a>
            <a href="#" class="btn btn-warning">예약하기</a>
            <a class="btn btn-success" th:href="@{/store/list}">목록으로</a>

            <a th:href="@{/store/update(storeIdx=${storeVO.storeIdx})}" class="btn btn-dark">맛집 정보 수정</a>

            <br><br><br>
        </div>
    </div>
</div>

<!--Modal-->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="myModalLabel">
                    <span th:text="${storeVO.storeName}" class="mb-4 purple"></span>
                </h5>
                <button class="close" type="button" data-dismiss="modal" aria-hidden="true">
                    &times;</button>
            </div>
            <div class="modal-body">

                <span th:if="${storeVO.MenuVO[0].menuIdx == 0}">메뉴 등록 중!</span>

                <div th:if="${storeVO.MenuVO[0].menuIdx != 0}"
                         th:each="MenuVO : ${storeVO.MenuVO}">
                        <div class="mt-2 mb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-egg-fried" viewBox="0 0 16 16">
                                <path d="M8 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                                <path d="M13.997 5.17a5 5 0 0 0-8.101-4.09A5 5 0 0 0 1.28 9.342a5 5 0 0 0 8.336 5.109 3.5 3.5 0 0 0 5.201-4.065 3.001 3.001 0 0 0-.822-5.216zm-1-.034a1 1 0 0 0 .668.977 2.001 2.001 0 0 1 .547 3.478 1 1 0 0 0-.341 1.113 2.5 2.5 0 0 1-3.715 2.905 1 1 0 0 0-1.262.152 4 4 0 0 1-6.67-4.087 1 1 0 0 0-.2-1 4 4 0 0 1 3.693-6.61 1 1 0 0 0 .8-.2 4 4 0 0 1 6.48 3.273z"/>
                            </svg>

                            <span th:text="${MenuVO.foodName}"></span>
                            <span th:text="${MenuVO.price}"></span>원
                        </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" type="button" data-dismiss="modal">Close</button>

<!--
                <button class="btn btn-primary" type="button" >Save changes</button>
-->

            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    // 메뉴보기 버튼 클릭 이벤트 핸들러
    document.getElementById("getMenu").addEventListener("click", function() {
        // 모달 표시
        $('#myModal').modal('show');
    });

</script>
<!--모달끝-->


<script type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=8abceac52f5d250937ec886cf8cd8d21"></script>

<script th:inline="javascript">
    //카카오 지도 사용하기
    var container = document.getElementById('map');


    var lati = /*[[${storeVO.storeLati}]]*/;
    var longi = /*[[${storeVO.storeLongi}]]*/;

    console.log(lati);
    console.log(longi);


    var options = {
        center: new kakao.maps.LatLng(lati, longi),
       /* https://map.kakao.com/?urlX=523954.0&urlY=1084098.0*/
        level: 3
    };

    var map = new kakao.maps.Map(container, options);


    //마커찍기
    // 마커가 표시될 위치입니다
    var markerPosition  = new kakao.maps.LatLng(lati, longi);

    // 마커를 생성합니다
    var marker = new kakao.maps.Marker({
        position: markerPosition
    });

    // 마커가 지도 위에 표시되도록 설정합니다
    marker.setMap(map);

    // 아래 코드는 지도 위의 마커를 제거하는 코드입니다
    // marker.setMap(null);
</script>




<th:block th:replace="header_footer/footer :: footerFragment"></th:block>

</body>
</html>

